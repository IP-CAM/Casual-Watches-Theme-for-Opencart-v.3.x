{% if options or show_price %}
<div class="ocf-offcanvas ocfilter-mobile d-block d-lg-none">
  <div class="ocfilter-mobile-handle">
    <button type="button" class="btn btn-primary" data-toggle="offcanvas">{{ icon_filter }}</button>
  </div>
  <div class="ocf-offcanvas-body"></div>
</div>

<div class="card ocfilter mb-4" id="ocfilter">
  {# heading_title #}
  <div class="d-none" id="ocfilter-button">
    <button class="btn btn-primary disabled" data-loading-text="Загрузка.."></button>
  </div>
  <div class="list-group list-group-flush">
    {% include 'cw/template/extension/module/ocfilter/selected_filter.twig' %}

    {% include 'cw/template/extension/module/ocfilter/filter_price.twig' %}

    {% include 'cw/template/extension/module/ocfilter/filter_list.twig' %}
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
  $('body').append($('.ocfilter-mobile').remove().get(0).outerHTML);

	var options = {
    mobile: $('.ocfilter-mobile').is(':visible'),
    php: {
      searchButton : {{ search_button ? 'true' : 'false' }},
      showPrice    : {{ show_price ? 'true' : 'false' }},
      showCounter  : {{ show_counter ? 'true' : 'false' }},
			manualPrice  : {{ manual_price ? 'true' : 'false' }},
      link         : '{{ link }}',
      path         : '{{ path }}',
      params       : '{{ params }}',
      index        : '{{ index }}'
    },
    text: {
      show_all: '{{ text_show_all }}',
      hide    : '{{ text_hide }}',
      load    : '{{ text_load }}',
      any     : '{{ text_any }}',
      select  : '{{ button_select }}'
    }
	};

  if (options.mobile) {
    $('.ocf-offcanvas-body').html($('#ocfilter').remove().get(0).outerHTML);
  }

  $('[data-toggle="offcanvas"]').on('click', function(e) {
    $(this).toggleClass('active');
    $('body').toggleClass('modal-open');
    $('.ocfilter-mobile').toggleClass('active');
  });

  setTimeout(function() {
    $('#ocfilter').ocfilter(options);
  }, 1);
});
</script>
{% endif %}
